if(!FPhi)var FPhi={};if(void 0===FPhi.ResourceManager){class ResourceManager{constructor(t,e,r,a,s,i,g){var l="";this.status=0,this.logDebug=!1,this.eventStatus=a,this.caller=r,this.baseURL=t,e.length>0&&(l=e+"."),this.widgetLoaded=0,this.languageCustomLoaded=0,this.languageDefaultLoaded=0,this.urlWidget=t+"widget.xml",this.urlLanguageCustom=t+"strings/strings."+l+"xml",this.urlLanguageDefault=t+"strings/strings.xml",this.resourceDict={},this.dpiList=s,this.browserDpi=i,this.scaleFactor=g;for(var n=163*i*g,u=this.dpiList.length-1,o=0;o<this.dpiList.length;o++)if(this.dpiList[o]>n){u=o;break}this.dpi=this.dpiList[u],this.imageScale=163/this.dpi,this.xmlHttpWidget=new XMLHttpRequest,this.xmlHttpWidget.rm=this,this.xmlHttpWidget.onreadystatechange=this.readyEvent,this.xmlHttpWidget.open("GET",this.urlWidget),this.xmlHttpWidget.send(null),this.xmlHttpLanguageCustom=new XMLHttpRequest,this.xmlHttpLanguageCustom.rm=this,this.xmlHttpLanguageCustom.onreadystatechange=this.readyEvent,this.xmlHttpLanguageCustom.open("GET",this.urlLanguageCustom),this.xmlHttpLanguageCustom.send(null),this.xmlHttpLanguageDefault=new XMLHttpRequest,this.xmlHttpLanguageDefault.rm=this,this.xmlHttpLanguageDefault.onreadystatechange=this.readyEvent,this.xmlHttpLanguageDefault.open("GET",this.urlLanguageDefault),this.xmlHttpLanguageDefault.send(null)}readyEvent(t){if(4==t.target.readyState&&200==t.target.status){var e=new DOMParser;t.target.responseURL==t.target.rm.urlWidget?(t.target.rm.widgetLoaded=1,t.target.rm.xmlDoc=e.parseFromString(t.target.responseText,"text/xml")):t.target.responseURL==t.target.rm.urlLanguageCustom?t.target.rm.languageCustomLoaded=1:t.target.responseURL==t.target.rm.urlLanguageDefault&&(t.target.rm.languageDefaultLoaded=1)}else 4==t.target.readyState&&200!=t.target.status&&(t.target.responseURL==t.target.rm.urlWidget?t.target.rm.widgetLoaded=-1:t.target.responseURL==t.target.rm.urlLanguageCustom?t.target.rm.languageCustomLoaded=-1:t.target.responseURL==t.target.rm.urlLanguageDefault&&(t.target.rm.languageDefaultLoaded=-1));if(0!==t.target.rm.widgetLoaded&&(0!==t.target.rm.languageCustomLoaded||0!==t.target.rm.languageDefaultLoaded)){if(-1==t.target.rm.widgetLoaded)t.target.rm.status=-1;else if(1==t.target.rm.languageCustomLoaded){var r=t.target.rm.xmlHttpLanguageCustom.responseText;e=new DOMParser;t.target.rm.xmlLang=e.parseFromString(r,"text/xml"),t.target.rm.status=1}else if(1==t.target.rm.languageDefaultLoaded){r=t.target.rm.xmlHttpLanguageDefault.responseText,e=new DOMParser;t.target.rm.xmlLang=e.parseFromString(r,"text/xml"),t.target.rm.status=1}else t.target.rm.status=-1;if(1==t.target.rm.status){for(var a,s={},i=t.target.rm.xmlDoc.querySelectorAll("[font]"),g=0;g<i.length;g++)(a=i[g].getAttribute("font")).length>0&&(s[a]=a);if(t.target.rm.fontRequestVector=[],null==document.getElementById("FPhi_Widget_style")){var l,n=document.createElement("style");for(l in n.id="FPhi_Widget_style",s){var u=t.target.rm.getResourceUrlBase(s[l]),o=s[l],d=new XMLHttpRequest;d.open("GET",u,!1),d.send(),200==d.status&&n.appendChild(document.createTextNode("@font-face { font-family: '"+o+"'; src: url('"+u+"'); }"))}document.head.appendChild(n)}t.target.rm.eventStatus(t.target.rm.caller,!0)}else t.target.rm.eventStatus(t.target.rm.caller,!1)}}static httpGet(t,e){var r=new XMLHttpRequest;return r.onreadystatechange=e,r.open("GET",t),r.send(null),200!=r.status?"":r.responseText}getElement(t,e,r){if("facephi-widget-conf"==t)return this.xmlDoc.getElementsByTagName("facephi-widget-conf")[0];var a="_portrait";r&&(a="_landscape");var s=this.xmlDoc.querySelector("[id="+t+a+"]");if(void 0!=s&&null!=s||(s=this.xmlDoc.querySelector("[id="+t+"]")),this.logDebug&&console.log(s),void 0!=s){var i=s.querySelector("[id="+e+"]");return this.logDebug&&console.log(i),void 0==i?void console.log("ResourceManager::getElement Error. elementId="+e+" undefined. Please verify resource's bundle."):i}console.log("ResourceManager::getElement Error. viewId="+t+" undefined. Please verify resource's bundle.")}getElements(t,e){var r="_portrait";e&&(r="_landscape");var a=this.xmlDoc.querySelector("[id="+t+r+"]");void 0!=a&&null!=a||(a=this.xmlDoc.querySelector("[id="+t+"]"));var s=[];if(a)for(var i=0;i<a.childNodes.length;i++)if(a.childNodes[i].nodeType==Node.ELEMENT_NODE){var g=null;void 0!==a.childNodes[i].attributes.mode&&(g=a.childNodes[i].attributes.mode.value),s.push({type:a.childNodes[i].nodeName,id:a.childNodes[i].attributes.id.value,mode:g})}return 0==s.length&&console.log("FPhi.ResourceManager: No elements for view="+t),s}isAttributeAvailable(t,e,r,a){var s=null;if("facephi-widget-conf"==t){s=this.xmlDoc.getElementsByTagName("facephi-widget-conf")[0]}else{var i="_portrait";r&&(i="_landscape");var g=this.xmlDoc.querySelector("[id="+t+i+"]");if(void 0!=g&&null!=g||(g=this.xmlDoc.querySelector("[id="+t+"]")),void 0!=g){var l=g.querySelector("[id="+e+"]");void 0!=l&&(s=l)}}if(void 0==s||null==s)return!1;var n=s.getAttribute(a);return void 0!=n&&null!=n}getSetupColor(t,e,r,a){var s=this.getElement(t,e,r);if(void 0==s||null==s)return null;var i,g,l,n,u=s.getAttribute(a);if(void 0==u||null==u)return null;9==u.length&&(i=parseInt(u.substring(1,3),16),g=parseInt(u.substring(3,5),16),l=parseInt(u.substring(5,7),16),n=parseInt(u.substring(7,9),16),u="rgba("+i+", "+g+", "+l+", "+(n/=255).toFixed(3)+")");return u}getSetupColorWithAlpha(t,e,r,a,s){var i=this.getElement(t,e,r).getAttribute(a);return i="rgba("+parseInt(i.substring(1,3),16)+", "+parseInt(i.substring(3,5),16)+", "+parseInt(i.substring(5,7),16)+", "+s.toFixed(3)+")"}getSetupFloat(t,e,r,a){var s=this.getElement(t,e,r).getAttribute(a);return parseFloat(s)}getSetupAlign(t,e,r,a){return this.getElement(t,e,r).getAttribute(a)}getSetupResourceId(t,e,r,a){var s=this.getElement(t,e,r).getAttribute(a),i=s.split(",");return i&&i.length>1?i[Math.floor(Math.random()*i.length)].trim():s}getSetupTextId(t,e,r,a){return this.getElement(t,e,r).getAttribute(a)}getSetupNodeType(t,e,r){return this.getElement(t,e,r).getAttribute("content_type")}getResourceUrl(t){return this.baseURL+"resources/"+this.dpi+"dpi/"+t}getResourceUrlBase(t){return this.baseURL+"resources/"+this.dpiList[0]+"dpi/"+t}getImageScale(){return this.imageScale}getImage(t){if(!(t in this.resourceDict)){var e=this.getResourceUrl(t),r=document.createElement("img");r.src=e,this.resourceDict[t]=r}return this.resourceDict[t]}translate(t){var e=t,r=this.xmlLang.querySelector("[id="+t+"]");return this.logDebug&&console.log(r),null!=r&&(e=r.textContent),e}}FPhi.ResourceManager=ResourceManager}